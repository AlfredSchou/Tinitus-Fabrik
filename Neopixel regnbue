#include <Adafruit_NeoPixel.h>

#define NUM_LEDS 47
#define DATA_PIN 2
boolean debug = true;

float counter = 0;

Adafruit_NeoPixel strip = Adafruit_NeoPixel(NUM_LEDS, DATA_PIN, NEO_GRB + NEO_KHZ800);
int sine[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47};

void setup() {
  pinMode(7,INPUT_PULLUP);
  strip.begin();
  Serial.begin(9600);
  strip.setBrightness(50);
}

void loop() { 
  while (digitalRead(7) == LOW){
    rainbow(30); 
      if (debug == true){
      Serial.println("knap tryk");
    }
    delay(10); 
  }
}

void rainbow(uint8_t wait) {
  uint16_t i, j;
  for(j=0; j<1; j++) {
    for(i=0; i<strip.numPixels(); i++) {
        strip.setPixelColor(i, Wheel((i*(13/2)+j) & 255));
        strip.setPixelColor(sine[(i + strip.numPixels() - 8) % strip.numPixels()], 0);
        strip.show();
        delay(wait);
      }
    } 
    while ( digitalRead(7) == HIGH){
      for( int n = strip.numPixels() - 8 ; n <= strip.numPixels(); n++){
        strip.setPixelColor(n ,0);
        strip.show();
        delay(wait);
      }
    }
}

uint32_t Wheel(byte WheelPos) {
  if(WheelPos < 85) {
    return strip.Color(WheelPos * 3, 255 - WheelPos * 3, 0);
  } 
  else if(WheelPos < 170) {
    WheelPos -= 85;
    return strip.Color(255 - WheelPos * 3, 0, WheelPos * 3);
  } 
  else {
    WheelPos -= 170;
    return strip.Color(0, WheelPos * 3, 255 - WheelPos * 3);
  }
}
